{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/front/src/components/PETCapture.js\",\n  _s = $RefreshSig$();\n// src/components/PETCapture.js\nimport React, { useState } from 'react';\nimport '../styles/PETStyles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PETCapture = () => {\n  _s();\n  const [weight, setWeight] = useState('');\n  const [date, setDate] = useState('');\n  const [priceUSD, setPriceUSD] = useState('');\n  const [priceMXN, setPriceMXN] = useState('');\n  const [message, setMessage] = useState('');\n  const conversionRate = 18;\n  const ratePerKgUSD = 0.5;\n\n  // Función para calcular los precios\n  const calculatePrices = weight => {\n    const weightNum = parseFloat(weight);\n    if (weightNum > 0) {\n      const priceInUSD = weightNum * ratePerKgUSD;\n      const priceInMXN = priceInUSD * conversionRate;\n      setPriceUSD(priceInUSD.toFixed(2));\n      setPriceMXN(priceInMXN.toFixed(2));\n    } else {\n      setPriceUSD('');\n      setPriceMXN('');\n    }\n  };\n  const handleWeightChange = event => {\n    const newWeight = event.target.value;\n    setWeight(newWeight);\n    calculatePrices(newWeight);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setMessage(''); // Reinicia el mensaje\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setMessage('Por favor, inicia sesión para registrar capturas.');\n        return;\n      }\n      const response = await fetch('http://54.177.153.3:5000/api/pet/pet-capture', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          capture_date: date,\n          weight_kg: weight,\n          price_usd: parseFloat(priceUSD),\n          // Se agrega el precio en USD\n          price_mxn: parseFloat(priceMXN) // Se agrega el precio en MXN\n        })\n      });\n      if (response.ok) {\n        setMessage('Captura registrada exitosamente.');\n        setDate('');\n        setWeight('');\n        setPriceUSD('');\n        setPriceMXN('');\n      } else {\n        const errorData = await response.json();\n        setMessage(`Error al registrar la captura: ${errorData.message || response.statusText}`);\n        console.error('Error al registrar captura:', errorData);\n      }\n    } catch (error) {\n      setMessage('Error en la conexión con el servidor.');\n      console.error('Error en la solicitud:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pet-capture\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Captura Semanal de PET\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Fecha de Captura:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: date,\n          onChange: e => setDate(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Peso del PET (kg):\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"0.1\",\n          step: \"0.1\",\n          value: weight,\n          onChange: handleWeightChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Precio Calculado (USD):\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: priceUSD,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Precio Calculado (MXN):\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: priceMXN,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Registrar Captura\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(PETCapture, \"LeYiim0W5bejDekp8xtRjkmA2W4=\");\n_c = PETCapture;\nexport default PETCapture;\nvar _c;\n$RefreshReg$(_c, \"PETCapture\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","PETCapture","_s","weight","setWeight","date","setDate","priceUSD","setPriceUSD","priceMXN","setPriceMXN","message","setMessage","conversionRate","ratePerKgUSD","calculatePrices","weightNum","parseFloat","priceInUSD","priceInMXN","toFixed","handleWeightChange","event","newWeight","target","value","handleSubmit","preventDefault","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","capture_date","weight_kg","price_usd","price_mxn","ok","errorData","json","statusText","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","e","required","min","step","readOnly","_c","$RefreshReg$"],"sources":["/home/ubuntu/front/src/components/PETCapture.js"],"sourcesContent":["// src/components/PETCapture.js\nimport React, { useState } from 'react';\nimport '../styles/PETStyles.css';\n\nconst PETCapture = () => {\n    const [weight, setWeight] = useState('');\n    const [date, setDate] = useState('');\n    const [priceUSD, setPriceUSD] = useState('');\n    const [priceMXN, setPriceMXN] = useState('');\n    const [message, setMessage] = useState('');\n\n    const conversionRate = 18;\n    const ratePerKgUSD = 0.5;\n\n    // Función para calcular los precios\n    const calculatePrices = (weight) => {\n        const weightNum = parseFloat(weight);\n        if (weightNum > 0) {\n            const priceInUSD = weightNum * ratePerKgUSD;\n            const priceInMXN = priceInUSD * conversionRate;\n            setPriceUSD(priceInUSD.toFixed(2));\n            setPriceMXN(priceInMXN.toFixed(2));\n        } else {\n            setPriceUSD('');\n            setPriceMXN('');\n        }\n    };\n\n    const handleWeightChange = (event) => {\n        const newWeight = event.target.value;\n        setWeight(newWeight);\n        calculatePrices(newWeight);\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setMessage(''); // Reinicia el mensaje\n\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setMessage('Por favor, inicia sesión para registrar capturas.');\n                return;\n            }\n\n            const response = await fetch('http://54.177.153.3:5000/api/pet/pet-capture', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`,\n                },\n                body: JSON.stringify({\n                    capture_date: date,\n                    weight_kg: weight,\n                    price_usd: parseFloat(priceUSD), // Se agrega el precio en USD\n                    price_mxn: parseFloat(priceMXN), // Se agrega el precio en MXN\n                }),\n            });\n\n            if (response.ok) {\n                setMessage('Captura registrada exitosamente.');\n                setDate('');\n                setWeight('');\n                setPriceUSD('');\n                setPriceMXN('');\n            } else {\n                const errorData = await response.json();\n                setMessage(`Error al registrar la captura: ${errorData.message || response.statusText}`);\n                console.error('Error al registrar captura:', errorData);\n            }\n        } catch (error) {\n            setMessage('Error en la conexión con el servidor.');\n            console.error('Error en la solicitud:', error);\n        }\n    };\n\n    return (\n        <div className=\"pet-capture\">\n            <h2>Captura Semanal de PET</h2>\n            <form onSubmit={handleSubmit}>\n                <label>\n                    Fecha de Captura:\n                    <input\n                        type=\"date\"\n                        value={date}\n                        onChange={(e) => setDate(e.target.value)}\n                        required\n                    />\n                </label>\n                <label>\n                    Peso del PET (kg):\n                    <input\n                        type=\"number\"\n                        min=\"0.1\"\n                        step=\"0.1\"\n                        value={weight}\n                        onChange={handleWeightChange}\n                        required\n                    />\n                </label>\n                <label>\n                    Precio Calculado (USD):\n                    <input type=\"text\" value={priceUSD} readOnly />\n                </label>\n                <label>\n                    Precio Calculado (MXN):\n                    <input type=\"text\" value={priceMXN} readOnly />\n                </label>\n                <button type=\"submit\">Registrar Captura</button>\n            </form>\n            {message && <p className=\"message\">{message}</p>}\n        </div>\n    );\n};\n\nexport default PETCapture;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}