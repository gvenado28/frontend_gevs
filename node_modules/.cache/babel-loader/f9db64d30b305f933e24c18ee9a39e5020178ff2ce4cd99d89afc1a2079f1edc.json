{"ast":null,"code":"// src/components/PETReport.js\nimport React,{useEffect,useState}from'react';import'../styles/PETStyles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PETReport=()=>{const[reportData,setReportData]=useState([]);const[error,setError]=useState('');// Función para obtener los datos del reporte de captura de PET\nconst fetchReportData=async()=>{try{const token=localStorage.getItem('token');// Usa el token de autenticación si está disponible\nconst response=await fetch('http://54.177.153.3:5000/api/pet/pet-report',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setReportData(data);setError('');}else if(response.status===403){setError('Acceso denegado. No tienes permisos para ver este reporte.');}else if(response.status===401){setError('Sesión expirada. Por favor, inicia sesión nuevamente.');}else{setError(`Error al obtener los datos del reporte: ${response.statusText}`);}}catch(error){setError('Error en la conexión con el servidor');console.error('Error en la solicitud de datos:',error);}};useEffect(()=>{fetchReportData();// Llamada a la función al cargar el componente\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"pet-report\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reporte de Captura de PET\"}),error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"pet-report-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Fecha de Captura\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Peso (kg)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio (USD)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio (MXN)\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reportData.map((entry,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(entry.capture_date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:entry.weight_kg}),/*#__PURE__*/_jsx(\"td\",{children:entry.price_usd}),/*#__PURE__*/_jsx(\"td\",{children:entry.price_mxn})]},index))})]})]});};export default PETReport;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","PETReport","reportData","setReportData","error","setError","fetchReportData","token","localStorage","getItem","response","fetch","headers","ok","data","json","status","statusText","console","className","children","map","entry","index","Date","capture_date","toLocaleDateString","weight_kg","price_usd","price_mxn"],"sources":["/home/ubuntu/front/src/components/PETReport.js"],"sourcesContent":["// src/components/PETReport.js\nimport React, { useEffect, useState } from 'react';\nimport '../styles/PETStyles.css';\n\nconst PETReport = () => {\n    const [reportData, setReportData] = useState([]);\n    const [error, setError] = useState('');\n\n    // Función para obtener los datos del reporte de captura de PET\n    const fetchReportData = async () => {\n        try {\n            const token = localStorage.getItem('token'); // Usa el token de autenticación si está disponible\n            const response = await fetch('http://54.177.153.3:5000/api/pet/pet-report', {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                setReportData(data);\n                setError('');\n            } else if (response.status === 403) {\n                setError('Acceso denegado. No tienes permisos para ver este reporte.');\n            } else if (response.status === 401) {\n                setError('Sesión expirada. Por favor, inicia sesión nuevamente.');\n            } else {\n                setError(`Error al obtener los datos del reporte: ${response.statusText}`);\n            }\n        } catch (error) {\n            setError('Error en la conexión con el servidor');\n            console.error('Error en la solicitud de datos:', error);\n        }\n    };\n\n    useEffect(() => {\n        fetchReportData(); // Llamada a la función al cargar el componente\n    }, []);\n\n    return (\n        <div className=\"pet-report\">\n            <h2>Reporte de Captura de PET</h2>\n            {error ? (\n                <p className=\"error-message\">{error}</p>\n            ) : (\n                <table className=\"pet-report-table\">\n                    <thead>\n                        <tr>\n                            <th>Fecha de Captura</th>\n                            <th>Peso (kg)</th>\n                            <th>Precio (USD)</th>\n                            <th>Precio (MXN)</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {reportData.map((entry, index) => (\n                            <tr key={index}>\n                                <td>{new Date(entry.capture_date).toLocaleDateString()}</td>\n                                <td>{entry.weight_kg}</td>\n                                <td>{entry.price_usd}</td>\n                                <td>{entry.price_mxn}</td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            )}\n        </div>\n    );\n};\n\nexport default PETReport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}