{"ast":null,"code":"// src/components/PETCapture.js\nimport React,{useState}from'react';import'../styles/PETStyles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PETCapture=()=>{const[weight,setWeight]=useState('');const[date,setDate]=useState('');const[priceUSD,setPriceUSD]=useState('');const[priceMXN,setPriceMXN]=useState('');const[message,setMessage]=useState('');const conversionRate=18;const ratePerKgUSD=0.5;const calculatePrices=weight=>{const priceInUSD=weight*ratePerKgUSD;const priceInMXN=priceInUSD*conversionRate;setPriceUSD(priceInUSD.toFixed(2));setPriceMXN(priceInMXN.toFixed(2));};const handleWeightChange=event=>{const newWeight=event.target.value;setWeight(newWeight);calculatePrices(newWeight);};const handleSubmit=async event=>{event.preventDefault();setMessage('');// Reinicia el mensaje\ntry{const token=localStorage.getItem('token');if(!token){setMessage('Por favor, inicia sesi贸n para registrar capturas.');return;}const response=await fetch('http://54.177.153.3:5000/api/pet/pet-capture',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({capture_date:date,weight_kg:weight})});if(response.ok){setMessage('Captura registrada exitosamente.');setDate('');setWeight('');setPriceUSD('');setPriceMXN('');}else{setMessage('Error al registrar la captura.');console.error('Error al registrar captura:',await response.json());}}catch(error){setMessage('Error en la conexi贸n con el servidor.');console.error('Error en la solicitud:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pet-capture\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Captura Semanal de PET\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Fecha de Captura:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Peso del PET (kg):\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0.1\",step:\"0.1\",value:weight,onChange:handleWeightChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Precio Calculado (USD):\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:priceUSD,readOnly:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Precio Calculado (MXN):\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:priceMXN,readOnly:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Registrar Captura\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message})]});};export default PETCapture;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","PETCapture","weight","setWeight","date","setDate","priceUSD","setPriceUSD","priceMXN","setPriceMXN","message","setMessage","conversionRate","ratePerKgUSD","calculatePrices","priceInUSD","priceInMXN","toFixed","handleWeightChange","event","newWeight","target","value","handleSubmit","preventDefault","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","capture_date","weight_kg","ok","console","error","json","className","children","onSubmit","type","onChange","e","required","min","step","readOnly"],"sources":["/home/ubuntu/front/src/components/PETCapture.js"],"sourcesContent":["// src/components/PETCapture.js\nimport React, { useState } from 'react';\nimport '../styles/PETStyles.css';\n\nconst PETCapture = () => {\n    const [weight, setWeight] = useState('');\n    const [date, setDate] = useState('');\n    const [priceUSD, setPriceUSD] = useState('');\n    const [priceMXN, setPriceMXN] = useState('');\n    const [message, setMessage] = useState('');\n\n    const conversionRate = 18;\n    const ratePerKgUSD = 0.5;\n\n    const calculatePrices = (weight) => {\n        const priceInUSD = weight * ratePerKgUSD;\n        const priceInMXN = priceInUSD * conversionRate;\n        setPriceUSD(priceInUSD.toFixed(2));\n        setPriceMXN(priceInMXN.toFixed(2));\n    };\n\n    const handleWeightChange = (event) => {\n        const newWeight = event.target.value;\n        setWeight(newWeight);\n        calculatePrices(newWeight);\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setMessage(''); // Reinicia el mensaje\n\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setMessage('Por favor, inicia sesi贸n para registrar capturas.');\n                return;\n            }\n\n            const response = await fetch('http://54.177.153.3:5000/api/pet/pet-capture', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`,\n                },\n                body: JSON.stringify({\n                    capture_date: date,\n                    weight_kg: weight,\n                }),\n            });\n\n            if (response.ok) {\n                setMessage('Captura registrada exitosamente.');\n                setDate('');\n                setWeight('');\n                setPriceUSD('');\n                setPriceMXN('');\n            } else {\n                setMessage('Error al registrar la captura.');\n                console.error('Error al registrar captura:', await response.json());\n            }\n        } catch (error) {\n            setMessage('Error en la conexi贸n con el servidor.');\n            console.error('Error en la solicitud:', error);\n        }\n    };\n\n    return (\n        <div className=\"pet-capture\">\n            <h2>Captura Semanal de PET</h2>\n            <form onSubmit={handleSubmit}>\n                <label>\n                    Fecha de Captura:\n                    <input\n                        type=\"date\"\n                        value={date}\n                        onChange={(e) => setDate(e.target.value)}\n                        required\n                    />\n                </label>\n                <label>\n                    Peso del PET (kg):\n                    <input\n                        type=\"number\"\n                        min=\"0.1\"\n                        step=\"0.1\"\n                        value={weight}\n                        onChange={handleWeightChange}\n                        required\n                    />\n                </label>\n                <label>\n                    Precio Calculado (USD):\n                    <input type=\"text\" value={priceUSD} readOnly />\n                </label>\n                <label>\n                    Precio Calculado (MXN):\n                    <input type=\"text\" value={priceMXN} readOnly />\n                </label>\n                <button type=\"submit\">Registrar Captura</button>\n            </form>\n            {message && <p className=\"message\">{message}</p>}\n        </div>\n    );\n};\n\nexport default PETCapture;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}