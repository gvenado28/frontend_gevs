{"ast":null,"code":"// src/App.js\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import Header from'./components/Header';import Footer from'./components/Footer';import Home from'./components/Home';import Dashboard from'./components/Dashboard';import CreateTask from'./components/CreateTask';import TaskList from'./components/TaskList';import Login from'./components/Login';import Register from'./components/Register';import PETCapture from'./components/PETCapture';import PETReport from'./components/PETReport';import'./App.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[userRole,setUserRole]=useState(null);const[userEmail,setUserEmail]=useState(null);useEffect(()=>{// Cargar el estado de autenticación y rol del usuario desde localStorage\nconst token=localStorage.getItem('token');const role=localStorage.getItem('userRole');const email=localStorage.getItem('userEmail');if(token&&role&&email){setIsAuthenticated(true);setUserRole(role);setUserEmail(email);}},[]);const handleLogin=userData=>{setIsAuthenticated(true);setUserRole(userData.role);setUserEmail(userData.email);// Guardar los datos en localStorage para persistencia\nlocalStorage.setItem('token',userData.token);localStorage.setItem('userRole',userData.role);localStorage.setItem('userEmail',userData.email);};const handleLogout=()=>{setIsAuthenticated(false);setUserRole(null);setUserEmail(null);// Limpiar localStorage al cerrar sesión\nlocalStorage.removeItem('token');localStorage.removeItem('userRole');localStorage.removeItem('userEmail');};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{isAuthenticated:isAuthenticated,onLogout:handleLogout,userRole:userRole,userEmail:userEmail}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{userRole:userRole})}),userRole==='admin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/create-task\",element:/*#__PURE__*/_jsx(CreateTask,{})}),/*#__PURE__*/_jsx(Route,{path:\"/task-list\",element:/*#__PURE__*/_jsx(TaskList,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"/pet-capture\",element:/*#__PURE__*/_jsx(PETCapture,{})}),/*#__PURE__*/_jsx(Route,{path:\"/pet-report\",element:/*#__PURE__*/_jsx(PETReport,{})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/create-task\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/task-list\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/pet-capture\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/pet-report\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),\" \"]})}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","Header","Footer","Home","Dashboard","CreateTask","TaskList","Login","Register","PETCapture","PETReport","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","userRole","setUserRole","userEmail","setUserEmail","token","localStorage","getItem","role","email","handleLogin","userData","setItem","handleLogout","removeItem","children","className","onLogout","path","element","onLogin","to"],"sources":["/home/ubuntu/front/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Home from './components/Home';\nimport Dashboard from './components/Dashboard';\nimport CreateTask from './components/CreateTask';\nimport TaskList from './components/TaskList';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport PETCapture from './components/PETCapture';\nimport PETReport from './components/PETReport';\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userRole, setUserRole] = useState(null);\n  const [userEmail, setUserEmail] = useState(null);\n\n  useEffect(() => {\n    // Cargar el estado de autenticación y rol del usuario desde localStorage\n    const token = localStorage.getItem('token');\n    const role = localStorage.getItem('userRole');\n    const email = localStorage.getItem('userEmail');\n    if (token && role && email) {\n      setIsAuthenticated(true);\n      setUserRole(role);\n      setUserEmail(email);\n    }\n  }, []);\n\n  const handleLogin = (userData) => {\n    setIsAuthenticated(true);\n    setUserRole(userData.role);\n    setUserEmail(userData.email);\n\n    // Guardar los datos en localStorage para persistencia\n    localStorage.setItem('token', userData.token);\n    localStorage.setItem('userRole', userData.role);\n    localStorage.setItem('userEmail', userData.email);\n  };\n\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    setUserRole(null);\n    setUserEmail(null);\n\n    // Limpiar localStorage al cerrar sesión\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole');\n    localStorage.removeItem('userEmail');\n  };\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Header \n          isAuthenticated={isAuthenticated} \n          onLogout={handleLogout} \n          userRole={userRole} \n          userEmail={userEmail} \n        />\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/\" element={<Home />} />\n            <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n            <Route path=\"/register\" element={<Register />} />\n\n            {/* Rutas protegidas */}\n            {isAuthenticated ? (\n              <>\n                <Route path=\"/dashboard\" element={<Dashboard userRole={userRole} />} />\n                {userRole === 'admin' && (\n                  <>\n                    <Route path=\"/create-task\" element={<CreateTask />} />\n                    <Route path=\"/task-list\" element={<TaskList />} />\n                  </>\n                )}\n                <Route path=\"/pet-capture\" element={<PETCapture />} />\n                <Route path=\"/pet-report\" element={<PETReport />} />\n              </>\n            ) : (\n              <>\n                <Route path=\"/dashboard\" element={<Navigate to=\"/login\" />} />\n                <Route path=\"/create-task\" element={<Navigate to=\"/login\" />} />\n                <Route path=\"/task-list\" element={<Navigate to=\"/login\" />} />\n                <Route path=\"/pet-capture\" element={<Navigate to=\"/login\" />} />\n                <Route path=\"/pet-report\" element={<Navigate to=\"/login\" />} />\n              </>\n            )}\n\n            <Route path=\"*\" element={<Navigate to=\"/\" />} /> {/* Redirección a Home por defecto */}\n          </Routes>\n        </div>\n        <Footer />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}